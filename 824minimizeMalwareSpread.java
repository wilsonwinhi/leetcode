class Solution {
    public int minMalwareSpread(int[][] graph, int[] initial) {
        // union find
        int n = graph.length;
        UnionFind uf = new UnionFind(n);
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (graph[i][j] == 1)
                    uf.union(i, j);
            }
        }
        int[] mal = new int[n];
        for (int i = 0; i < initial.length; i++) {
            mal[uf.find(i)]++;
        }
        int res = 0;
        int index = n;
        for (int i = 0; i < initial.length; i++) {
            int bad = initial[i];
            if (uf.size(bad) > res) {
                res = uf.size(bad);
                index = bad;
            }
            if (uf.size(bad) == res && index > bad) {
                index = bad;
            }
        }
        return index;         
    }
}
